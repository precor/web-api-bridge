(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{43:function(e,t,n){},47:function(e,t,n){e.exports=n(88)},85:function(e,t,n){var r={"./Api1":25,"./Api1.js":25,"./Api2":26,"./Api2.js":26,"./Api3":27,"./Api3.js":27,"./Common":13,"./Common.js":13,"./Send":8,"./Send.js":8};function c(e){var t=a(e);return n(t)}function a(e){var t=r[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}c.keys=function(){return Object.keys(r)},c.resolve=a,e.exports=c,c.id=85},88:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(44),o=n.n(a),i=n(2),u=n(45),l=n(1),s=n(3),b=n(28),f=n(30),d=n.n(f),p=n(46),h=function(e){var t=e.size,n=t.width,r=t.height,c=e.id,a=e.grayscale,o=e.blur,i=c?"https://picsum.photos/id/".concat(c,"/").concat(n,"/").concat(r,"/"):"https://picsum.photos/".concat(n,"/").concat(r,"/");return a&&(i="".concat(i,"?grayscale")),o&&(i="".concat(i,a?"&blur":"?blur")),i},m=function(){var e=Object(p.a)(d.a.mark(function e(t){var n,r,c,a,o;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.lastRequestUrl,(r=h(t))!==n){e.next=4;break}return e.abrupt("return",t);case 4:return e.next=6,fetch(r);case 6:return c=e.sent,e.next=9,c.blob();case 9:return a=e.sent,o=c.url.split("/")[4],e.abrupt("return",Object(l.a)({},t,{lastRequestUrl:h(Object(l.a)({},t,{id:o})),id:o,url:URL.createObjectURL(a)}));case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();var j=function(){var e=function(){var e=Object(r.useState)({width:window.innerWidth,height:window.innerHeight}),t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)(function(){var e=function(){return c({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),n}(),t=Object(r.useState)({}),n=Object(i.a)(t,2),c=n[0],a=n[1],o=c.id,u=c.grayscale,s=c.blur;return Object(r.useEffect)(function(){m(Object(l.a)({},c,{size:e})).then(function(e){return a(e)})},[e,o,u,s]),[c,a]},w=function(){console.log("render webapp1.Type1");var e=j(),t=Object(i.a)(e,2),n=t[0],a=t[1],o=n.url;return Object(r.useEffect)(function(){Object(b.setCallback)("photoSelected",function(e){return a(function(t){return Object(l.a)({},t,{id:e})})}),s.common.setCallback("displayGrayscale",function(e){return a(function(t){return Object(l.a)({},t,{grayscale:e})})}),s.common.setCallback("displayBlur",function(e){return a(function(t){return Object(l.a)({},t,{blur:e})})})},[a]),o?c.a.createElement("img",{src:o,alt:""}):null},O=n(29),v=n(14),y=(n(43),function(e,t){var n=Object(r.useState)(e),c=Object(i.a)(n,2),a=c[0],o=c[1];return{value:a,onChange:function(e){var n=e.target.checked;o(n),t(n)},type:"checkbox"}}),g=function(e){var t=e.canModPhotos;console.log("render webapp1.Type2");var n=j(),a=Object(i.a)(n,2),o=a[0],u=a[1],b=y(!1,v.setGrayscale),f=y(!1,v.setBlur),d=o.url,p=o.id;return Object(r.useEffect)(function(){s.api2.setCallback("displayNewPhoto",function(){return u(function(e){return Object(l.a)({},e,{id:void 0})})}),s.common.setCallback("displayGrayscale",function(e){return u(function(t){return Object(l.a)({},t,{grayscale:e})})}),s.common.setCallback("displayBlur",function(e){return u(function(t){return Object(l.a)({},t,{blur:e})})})},[u]),d?c.a.createElement("div",{className:"container"},c.a.createElement("img",{src:d,alt:"",onClick:function(){return Object(O.photoClicked)(p)}}),t&&c.a.createElement("div",{className:"top-overlay"},c.a.createElement("label",null,"B/W:",c.a.createElement("input",b)),c.a.createElement("label",null,"Blur:",c.a.createElement("input",f)))):null},E=function(){console.log("webapp1 render");var e=Object(r.useState)(),t=Object(i.a)(e,2),n=t[0],a=t[1],o=Object(r.useState)(),l=Object(i.a)(o,2),s=l[0],b=l[1];return Object(r.useEffect)(function(){Object(u.startApis)("https://precor.github.io").then(function(e){var t=e.type,n=e.apis;b(!!n.find(function(e){return"Api3"===e})),a(t)})},[]),n?"LibType1"===n?c.a.createElement(w,null):c.a.createElement(g,{canModPhotos:s}):null};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[47,1,2]]]);
//# sourceMappingURL=main.87f39f06.chunk.js.map