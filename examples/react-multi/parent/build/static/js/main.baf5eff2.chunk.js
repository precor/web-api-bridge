(this.webpackJsonpparent=this.webpackJsonpparent||[]).push([[0],{41:function(e,t,i){e.exports=i(77)},76:function(e,t,i){},77:function(e,t,i){"use strict";i.r(t);var s=i(0),a=i.n(s),r=i(38),o=i.n(r),n=i(40),p=i(39),c=i.n(p);i(76);const l=["https://precor.github.io/web-api-bridge/examples/react-multi/webapp1/build/#/page2/","https://precor.github.io/web-api-bridge/examples/react-multi/webapp1/build/#/page2/","https://precor.github.io/web-api-bridge/examples/react-multi/webapp2/build/","https://precor.github.io/web-api-bridge/examples/react-multi/webapp2/build/"],d=[];class h{constructor(e){this.setSend=e=>{this.send=e},this.photoSelected=e=>{this.send("photoSelected",[e],!1)},this.send=e}}class m{constructor(e){this.setSend=e=>{this.send=e},this.photoClicked=e=>{d.find(e=>e.props.api instanceof h).props.api.photoSelected(e),d.forEach(e=>{e.props.api!==this&&e.props.api instanceof m&&e.props.api.displayNewPhoto()})},this.displayNewPhoto=()=>{this.send("displayNewPhoto",null,!1)},this.send=e}}class g extends s.Component{constructor(...e){super(...e),this.setIframe=e=>{if(!e||this.iframe)return;this.iframe=e;const t=this.props,i=t.src,s=t.api,a=new URL(i);this.webApiBridge=new c.a,this.webApiBridge.origin=a.origin,this.webApiBridge.targetOrigin=a.origin,this.webApiBridge.apis=[s],s.setSend(this.webApiBridge.send.bind(this.webApiBridge)),d.push(this),this.webApiBridge.target=e.contentWindow,window.addEventListener("message",e=>{e&&e.source===this.webApiBridge.target&&this.webApiBridge.onMessage(e,e.data)}),this.iframe.onload=()=>{console.log("".concat(e.src," loaded"))}}}render(){const e=this.props,t=e.src,i=(e.api,Object(n.a)(e,["src","api"]));return console.log("render iframe: ".concat(t)),a.a.createElement("iframe",Object.assign({src:t,title:t,ref:e=>{this.setIframe(e)},scrolling:"no"},i))}}var b=()=>(console.log("render parent"),a.a.createElement("div",null,a.a.createElement("div",null,a.a.createElement(g,{className:"fullscreen-iframe",src:"https://precor.github.io/web-api-bridge/examples/react-multi/webapp1/build/#/page1/",api:new h})),a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"row"},l.map((e,t)=>a.a.createElement(g,{className:"image-select",key:t,src:e,api:new m}))),a.a.createElement("div",{className:"overlay-text"},"Click on one of the 4 photos"))));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(b,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})}},[[41,1,2]]]);
//# sourceMappingURL=main.baf5eff2.chunk.js.map