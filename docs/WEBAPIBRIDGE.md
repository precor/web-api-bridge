<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [WebApiBridge][1]
    -   [apis][2]
    -   [target][3]
    -   [useReactNativeWebView][4]
    -   [listener][5]
    -   [origin][6]
    -   [targetOrigin][7]
    -   [onMessage][8]
        -   [Parameters][9]
    -   [send][10]
        -   [Parameters][11]

## WebApiBridge

`WebApiBridge` provides a function call API interface between Javascript processes
that pass `MessageEvent` objects such as a a web page and an iframe or a React Native
application and a web app running in a [react-native-webview][12].

### apis

Property of the api objects that contain methods for incoming api function
calls. This is an array of objects so that a single `WebViewApi` can have
multiple APIs. The first API with a function is used if the function exists
in more than one API.

### target

Property for target object to post messages to the other side. Typically the `window`,
or a `window.parent` for an iframe in a normal web page. For the `WebView`
component on the React Native side use the `ref`, and for the web side of
[react-native-webview][12]
use `window.parent` for iOS and `window` for Android.

### useReactNativeWebView

Property that should be truthy for a webview using
[react-native-webview][12]. When set
`target.ReactNativeWebView.postMessage` will be used instead of `target.postMessage`.

### listener

Property that can be set to a function that can monitor all `Message` objects exchanged
between `WebApiBridge` objects.

### origin

Property for validating the origin of received messages. The property is set to a substring
of the origin to be matched in browser windows. This makes it easy to provide some checking
in development mode, for example, `':3000'` will allow messages from any server using port
3000\. By default it's set to `''`, which will allow messages from any origin. This property
should be set as restrictively as possible. e.g. `'https://www.mydomain.com:3000'`. Note
that his property is irrelevant in React Native WebViews.

### targetOrigin

Property for specifying the origin of the target window in messages sent to browser windows.
By default it's set to `'*'`, which will allow messages to any document. This property
should be set as restrictrively as possible. e.g. `'https://www.mydomain.com:3000'`. Note
that his property is irrelevant in React Native WebViews.

### onMessage

Function that should get called when an event containing a message is received
from the other side.

#### Parameters

-   `event` **[object][13]** Incomming event.
-   `data` **[string][14]** The incoming data received, which is a stingified JSON
    message. Defaults to `event.nativeEvent.data`, which is correct for React Native
    but needs to be overridden for web apps with `event.data`. (optional, default `event.nativeEvent.data`)

### send

Invoke a function on the remote.

#### Parameters

-   `targetFunc` **[string][14]** A string of the name of the api function to execute.
-   `args` **[Array][15]** An array of parameters to be passsed to the `targetFun`.
-   `wantResult` **[boolean][16]** Boolean to indicate if a `Promise` should be `fullfilled`
       or `rejected` after the remote api completes the call. If `false` then no `Promise`
       will be `fullfilled`. (optional, default `false`)

Returns **[Promise][17]** if `wantResult` is `true`, `void` if not.

[1]: #webapibridge

[2]: #apis

[3]: #target

[4]: #usereactnativewebview

[5]: #listener

[6]: #origin

[7]: #targetorigin

[8]: #onmessage

[9]: #parameters

[10]: #send

[11]: #parameters-1

[12]: https://github.com/react-native-community/react-native-webview

[13]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[14]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[15]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array

[16]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean

[17]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise
